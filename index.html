<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LabIA - AirBiz</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://cdn.tailwindcss.com https://apis.google.com;">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Cargar la librería de Google -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>

<body class="bg-gray-100 font-sans">
    <!-- Main Layout -->
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside class="relative w-1/6 bg-gray-900 text-white shadow-md p-4 flex flex-col">
            <div class="flex flex-col items-center w-full mb-6">
                <h1 class="text-7xl font-bold font-sans text-gray-200 text-center mt-4">LabIA</h1>
                <p class="text-gray-200 text-center text-sm">Tu asistente legal inteligente</p>
            </div>

            <!-- Contrato Selection in a Box -->
            <div class="border border-gray-300 p-4 rounded-lg mt-4">
                <label for="contractSelect" class="block text-gray-400 mb-2">Seleccione un contrato de trabajo:</label>
                <select id="contractSelect"
                    class="w-full p-2 border border-gray-700 bg-gray-700 text-gray-400 rounded-lg focus:ring focus:ring-blue-300">
                    <option value="">Seleccione...</option>
                    <option value="contract1">Contrato 1</option>
                    <option value="contract2">Contrato 2</option>
                    <option value="contract3">Contrato 3</option>
                </select>
            </div>

            <!-- Logo en la parte inferior -->
            <img src="airbiz.png" alt="AirBiz Logo"
                class="absolute bottom-4 left-6 w-24 h-auto filter invert brightness-100 grayscale">

        </aside>

        <!-- Chat Area -->
        <main class="w-5/6 bg-gray-800 text-white p-6 relative flex flex-col">
            <!-- Chat Container -->
            <div id="chatContainer" class="space-y-6 pb-20 mb-6 overflow-y-auto"
                style="max-height: calc(100vh - 200px);">
                <p class="text-gray-400 text-center">Inicia una consulta seleccionando un contrato de trabajo y
                    escribiendo tu pregunta.</p>
            </div>

            <!-- Query Form Fixed at the Bottom -->
            <form id="queryForm"
                class="fixed bottom-14 left-[16.67%] right-0 w-[70%] mx-auto bg-gray-800 p-4 flex items-center justify-between rounded-lg">
                <textarea id="queryInput"
                    class="w-full p-3 border border-gray-800 bg-gray-700 text-gray-200 rounded-lg focus:ring focus:ring-blue-300 resize-none"
                    placeholder="Escribe tu consulta aquí..." rows="1" required></textarea>
            </form>

            <!-- Footer -->
            <footer class="fixed bottom-0 left-1/6 w-5/6 text-center p-2 text-gray-400 text-sm">
                © 2025 AirBiz. Todos los derechos reservados.
            </footer>
        </main>
    </div>

    <!-- Botón de inicio de sesión de Google (Posicionado en la parte superior derecha) -->
    <div class="fixed top-6 right-6 z-10">
        <button id="googleSignInBtn" class="bg-blue-200 text-white py-2 px-4 rounded-lg">Iniciar sesión con Google</button>
    </div>

    <script>
        // Función para inicializar la API de Google
        function onLoad() {
            console.log('Google API cargado correctamente');
            gapi.load('auth2', function () {
                console.log('Cargando Google Auth2...');
                gapi.auth2.init({
                    client_id: '554337460533-88ds3l81v3rmhufv2td4aq9qq26gts6n.apps.googleusercontent.com' // Reemplaza con tu Client ID
                }).then(function () {
                    console.log('Google Auth2 cargado correctamente');
                    // Verificar que el botón está en el DOM
                    console.log(document.getElementById('googleSignInBtn'));
                    attachSignin(document.getElementById('googleSignInBtn'));
                }).catch(function (error) {
                    console.error('Error al cargar Google Auth2:', error);
                });
            });
        }

        // Función para asociar el botón de login con el manejador de Google Sign-In
        function attachSignin(element) {
            gapi.auth2.getAuthInstance().attachClickHandler(element, {}, function(googleUser) {
                var profile = googleUser.getBasicProfile();
                console.log("ID: " + profile.getId()); // ID de usuario
                console.log("Nombre: " + profile.getName()); // Nombre de usuario
                console.log("Email: " + profile.getEmail()); // Email del usuario

                // Aquí puedes agregar lo que quieras hacer después de que el usuario inicie sesión
                // Ejemplo: Redirigir o guardar datos del usuario en tu aplicación
            }, function(error) {
                console.log(JSON.stringify(error, null, 2));
            });
        }

        // Cargar la API de Google cuando el script haya sido cargado
        window.onload = onLoad;
    </script>
</body>

</html>





